/*
 ten.js
 @copyright 2012 Kevin von Flotow <vonflow@gmail.com>
 @license MIT License <http://opensource.org/licenses/MIT> */
(function(m){function k(a){return a?f.isFunction(a)?f.ready(a):f.isString(a)&&0===a.indexOf("<")?f.create(a):f.find(a):a}function r(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].outerHTML;return d}function s(a){for(var b=a.length,c="",d=0;d<b;d++)c=a[d]instanceof k?c+r(a[d]):f.isElement(a[d])?c+a[d].outerHTML:c+a[d];return c}function p(a,b,c){var d=a.length,e;e=/<.*?>/g;f.isArray(b)?b=s(b):b instanceof k&&(b=r(b));if("inner"===c)if(b)if(c=a.length,1<c)for(e=0;e<c;e++)a[e].innerHTML=b;else a[0].innerHTML=
b;else a=a.innerHTML;else if(e.test(b))for(e=0;e<d;e++)a[e].insertAdjacentHTML(c,b);else{var g;l.hasOwnProperty(b)&&!1!==l[b]?g=l[b]:(g=j.createTextNode(b),l[b]=l.hasOwnProperty(b)&&!1===l[b]?g:!1);if("afterbegin"==c)for(e=0;e<d;e++)a[e].insertBefore(g.cloneNode(!0),a[e].firstChild);else if("beforeend"==c)for(e=0;e<d;e++)a[e].appendChild(g.cloneNode(!0))}return a}function q(a,b,c){for(var d=0,e=a.length;d<e;d++){var g=a[d].classList;if(f.isString(b))g[c](b);else if(f.isArray(b))for(var n=0,h=b.length;n<
h;n++)g[c](b[d])}return a}function t(a){return a.replace(/(^\s+|\s+$)/g,"").replace(/\s\s+/g," ")}var f,h={},u={},l={},j=m.document;f={version:"0.0.10",getScript:function(a,b){var c=j.createElement("script"),d=j.getElementsByTagName("head")[0]||j.getElementsByTagName("body")[0];c.type="application/javascript";c.async=!0;c.src=a;c.onload=c.onreadystatechange=function(){b&&b();c.onload=c.onreadystatechange=null};d.appendChild(c);return c},ajax:function(a){var b={url:!1,type:"GET",data:!1,dataType:"html",
charset:"UTF-8",success:!1,error:!1,complete:!1,cache:!0,target:!1},c={json:"application/json",jsonp:"application/javascript",html:"text/html",plain:"text/plain"},b=f.extend(b,a);b.dataType=b.dataType.toLowerCase();b.type=b.type.toUpperCase();b.charset=b.charset.toUpperCase();if("string"===typeof b.url&&c.hasOwnProperty(b.dataType)){if(!1===b.cache){a=b;var d=b.url,e="_="+(new Date).getTime();f.isArray(e)&&(e=s(e));d=-1!=d.indexOf("?")?d.split("?")[0]+"?"+e+"&"+d.split("?")[1]:-1!=d.indexOf("#")?
d.split("#")[0]+"?"+e+"#"+d.split("#")[1]:d+"?"+e;a.url=d}var g=new XMLHttpRequest;g.open(b.type,b.url,!0);g.setRequestHeader("Content-Type",c[b.dataType]+";charset="+b.charset);g.send();g.onreadystatechange=function(){if(4===g.readyState)if(200===g.status){var a=g.responseXML||g.responseText;b.success.call(f.isTen(b.target)?b.target:this,a)}else f.isFunction(b.error)&&b.error.call(f.isTen(b.target)?b.target:this,g.statusText);g.onreadystatechange=null}}else b.error.call(f.isTen(b.target)?b.target:
this,"invalid usage")},length:function(a){var b=0,c;if(f.isObject(a))for(c in a)a.hasOwnProperty(c)&&b++;return b},extend:function(){var a=arguments[0]||[];if(2<=arguments.length){arguments=Array.prototype.slice.call(arguments,1);var b,c=arguments.length;for(b=0;b<c;b++)null!=arguments[b]&&f.each(arguments[b],function(b,c){void 0!==b&&(a[b]=c)})}return a},ready:function(a){j.addEventListener("DOMContentLoaded",a,!1)},create:function(a){var b=a.match(/^<(.*?)\s?\/?>(?:(.*?)<\/.*?>)?$/);a=b[2];b=j.createElement(b[1]);
a&&(b.innerHTML=a);return f.find(b)},find:function(a){var b=a;a=new k;if(f.isElement(b)||b instanceof HTMLDocument)a[0]=b,a.length=1;else{var b=j.querySelectorAll(b),c,d=b.length;for(c=0;c<d;c++)a[c]=b[c];a.length=b.length}return a},each:function(a,b){var c=!1,d=a.length,e;if(f.isArray(a)){c=!0;for(e=0;e<d;e++)b(e,a[e])}else if(f.isObject(a))for(key in Object.keys(a),c=!0,a)b(key,a[key]);return c},isDefined:function(a){return"undefined"!==typeof a},isElement:function(a){return a instanceof HTMLElement},
isString:function(a){return"string"===typeof a},isObject:function(a){return"[object Object]"===Object.prototype.toString.call(a)},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},isFunction:function(a){return"function"===typeof a},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},isTen:function(a){return a instanceof k},trim:function(a){f.isString(a)?a=t(a):f.isArray(a)&&f.each(a,function(b,c){f.isString(c)&&(a[b]=t(c))});return a}};k.prototype=
{addClass:function(a){return q(this,a,"add")},removeClass:function(a){return q(this,a,"remove")},toggle:function(a){return q(this,a,"toggle")},hasClass:function(a){return this[0].classList.contains(a)},append:function(a){return p(this,a,"beforeend")},prepend:function(a){return p(this,a,"afterbegin")},html:function(a){return p(this,a,"inner")},find:function(a){var b=[],c="ten-find-"+Math.floor(2E10*Math.random()+1);this.addClass(c);b=f.find("."+c+" "+a);this.removeClass(c);return b},each:function(a){var b=
Object.keys(this),c=this.length,d;for(d=0;d<c;d++)a(b[d],this[d]);return this},text:function(){return this.innerText||f.trim(this.textContent)||f.trim(this.innerHTML.replace(/<.*?>/g,""))},first:function(){return 0<this.length?this[0]:this},last:function(){var a=this.length;return 0<a?this[a-1]:this},show:function(){for(var a=0,b=this.length;a<b;a++)this[a].style.display=u[this];return this},hide:function(){for(var a=0,b=this.length;a<b;a++){var c=m.getComputedStyle(this[a],null).getPropertyValue("display");
this[a].getAttribute("style");u[this]=c;this[a].style.display="none"}return this},on:function(a,b,c,d){f.isFunction(b)&&(c=b,b=void 0);b in h||(h[b]={});for(var e=0,g=this.length;e<g;e++){a in h[b]?f.find(this[e]).off(a,b,!0):h[b][a]={};if(1===d){var n=c;c=function(c){n.call(c.target,c);f.find(this[e]).off(a,b)}}var j=function(a){c.call(a.target,a)};h[b][a].func=j;this[e].addEventListener(a,j,!1)}return this},one:function(a,b,c){return this.on(a,b,c,1)},off:function(a,b,c){b=b||void 0;if(b in h&&
a in h[b]){var d=h[b][a],e;for(func in d){for(e=0;e<length;e++)this[e].removeEventListener(a,d.func,!1);!0!==c&&delete h[b]}}return this},load:function(a,b){f.ajax({url:a,target:this,success:function(a){for(var b=0,e=this.length;b<e;b++)this[b].innerHTML=a},error:function(a){b.call(this,a)}})},css:function(a,b){if(f.isString(a)&&b){var c=a;a={};a[c]=b}for(var d=this,c=a,e=/^(padding|margin|border)\-(top|right|bottom|left)$/,g,h=0,j=d.length;h<j;h++)f.each(c,function(a,b){(g=a.match(e))&&(a=g[1]+g[2].charAt(0).toUpperCase()+
g[2].slice(1));f.isNumeric(b)&&(b+="px");d[h].style[a]=b});return d}};m.ten=m.$=f.extend(function(a){return new k(a)},f)})(window);
